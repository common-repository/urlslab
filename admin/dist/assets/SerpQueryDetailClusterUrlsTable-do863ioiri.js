import{w as d,r as i,R as t,_ as n,b7 as v,x as C,E as x,N,aM as b,V as s,b8 as S,bv as T,L as z,C as P,Y as k,bw as F,bx as L,S as q,I as _,B as M}from"../main-do863ioiri.js";import{T as w}from"./TableFilters-do863ioiri.js";const D={domain_name:n("Domain","urlslab"),cluster_level:n("Clustering Level","urlslab"),queries_cnt:n("Queries","urlslab")},I={...v,...D},m="serp-queries/query/cluster-urls",O=[{key:"cluster_level",dir:"DESC",op:"<"}];function B(){const l=d(p=>p.setTable),a=d(p=>p.queryDetailPanel),[o,u]=i.useState(!1),{query:r,country:c}=a;return i.useEffect(()=>{u(!0),l(m,{slug:m,header:I,paginationId:"url_id",sorting:O,fetchOptions:{query:r,country:c,domain_type:"A",max_position:10,competitors:2}})},[c,r,l]),o&&t.createElement(R,null)}const R=i.memo(()=>{const{columnHelper:l,data:a,isLoading:o,isSuccess:u,isFetchingNextPage:r,ref:c}=C({slug:m}),p=i.useMemo(()=>{var e;return(e=a==null?void 0:a.pages)==null?void 0:e.flatMap(f=>f??[])},[a==null?void 0:a.pages]),E=d().useFetchOptions(),h=x(e=>e.activePanel),{columnTypes:g,isLoadingColumnTypes:y}=N(m),V=i.useMemo(()=>g?[l.accessor("url_name",{tooltip:e=>e.getValue(),cell:e=>t.createElement(b,{to:e.getValue(),target:"_blank"},e.getValue()),header:e=>t.createElement(s,{...e}),size:250}),l.accessor("domain_name",{tooltip:e=>e.getValue(),cell:e=>t.createElement(b,{to:e.getValue(),target:"_blank"},e.getValue()),header:e=>t.createElement(s,{...e}),size:150}),l.accessor("domain_type",{className:"nolimit",cell:e=>g==null?void 0:g.domain_type.values[e.getValue()],header:e=>t.createElement(s,{...e}),size:30}),l.accessor("cluster_level",{className:"nolimit",cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:30}),l.accessor("queries_cnt",{className:"nolimit",cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:30}),l.accessor("url_title",{tooltip:e=>e.getValue(),cell:e=>t.createElement("strong",null,e.getValue()),header:e=>t.createElement(s,{...e}),minSize:100}),l.accessor("url_description",{tooltip:e=>e.getValue(),cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),minSize:100}),l.accessor("comp_intersections",{cell:e=>t.createElement("strong",null,e.getValue()),header:e=>t.createElement(s,{...e}),minSize:50}),l.accessor("best_position",{cell:e=>t.createElement("strong",null,e.getValue()),header:e=>t.createElement(s,{...e}),minSize:50}),l.accessor("top10_queries_cnt",{cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),minSize:50}),l.accessor("top100_queries_cnt",{cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),minSize:50}),l.accessor("top_queries",{tooltip:e=>S(e.getValue()),cell:e=>e.getValue().join(", "),header:e=>t.createElement(s,{...e}),minSize:200}),l.accessor("my_urls_ranked_top10",{className:"nolimit",cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:30}),l.accessor("my_urls_ranked_top100",{className:"nolimit",cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:30}),l.accessor("country_volume",{className:"nolimit",cell:e=>e.getValue()&&e.getValue()>0?e.getValue():"-",header:e=>t.createElement(s,{...e}),size:30}),l.accessor("country_value",{className:"nolimit",cell:e=>e.getValue()&&e.getValue()>0?e.getValue():"-",header:e=>t.createElement(s,{...e}),size:30})]:[],[l,g]);return t.createElement(t.Fragment,null,t.createElement("div",{className:"urlslab-moduleView-headerBottom"},t.createElement(U,null),t.createElement("div",{className:"flex flex-justify-space-between flex-align-center pb-s"},t.createElement(w,null),t.createElement(T,{tableActions:{noImport:!0,noDelete:!0}}))),o||y?t.createElement(z,null):t.createElement(t.Fragment,null,t.createElement(P,{columns:V,data:u&&p,referrer:c,loadingRows:r,disableAddNewTableRecord:!0},t.createElement(k,null)),E.domain_type==="M"&&(a==null?void 0:a.length)===0&&t.createElement("div",{className:"urlslab-serpPanel-empty-table"},t.createElement("p",null,n("None of your pages are ranking for this keyword","urlslab")),t.createElement(b,{className:"urlslab-button active",to:"/"+F("urlslab-generator")},n("Create a Post","urlslab"))),E.domain_type==="C"&&(a==null?void 0:a.length)===0&&t.createElement("div",{className:"urlslab-serpPanel-empty-table"},t.createElement("p",null,n("None of your competitors are ranking for this keyword","urlslab")))),h==="export"&&t.createElement(L,null))}),U=i.memo(()=>{const l=d().useFetchOptions(),a=d(r=>r.setFetchOptions),[o,u]=i.useState({competitorCnt:l.competitors,maxPos:l.max_position});return t.createElement("div",{className:"flex flex-align-center mb-m"},t.createElement(q,{defaultAccept:!0,autoClose:!0,items:{A:n("All URLs","urlslab"),M:n("My URLs","urlslab"),C:n("Competitor URLs","urlslab")},name:"url_view_type",value:l.domain_type,onChange:r=>a(m,{domain_type:r})}),t.createElement("div",{className:"ml-m"},t.createElement(_,{labelInline:!0,type:"number",liveUpdate:!0,defaultValue:o.competitorCnt,label:n("Clustering Level","urlslab"),onChange:r=>u(c=>({...c,competitorCnt:r}))})),t.createElement("div",{className:"ml-m"},t.createElement(_,{labelInline:!0,type:"number",liveUpdate:!0,defaultValue:o.maxPos,label:n("Maximum Position","urlslab"),onChange:r=>u(c=>({...c,maxPos:r}))})),t.createElement(M,{sx:{ml:1.5},onClick:()=>{a(m,{max_position:o.maxPos,competitors:o.competitorCnt})}},n("Update table","urlslab")))});export{B as default};
