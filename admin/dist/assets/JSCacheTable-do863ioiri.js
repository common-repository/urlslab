import{w as p,r,R as t,_ as n,x as y,N as L,y as v,O as I,Q as M,U as B,z as f,V as c,W as C,A as F,L as k,X as N,M as V,C as U,Y as _}from"../main-do863ioiri.js";const D="url_id",J={url:n("URL","urlslab"),filesize:n("File size","urlslab"),status:n("Status","urlslab"),status_changed:n("Last change","urlslab")};function Q({slug:s}){const a=p(h=>h.setTable),[i,u]=r.useState(!1);return r.useEffect(()=>{u(!0),a(s,{paginationId:D,slug:s,header:J})},[a,s]),i&&t.createElement(A,{slug:s})}function A({slug:s}){const{columnHelper:a,data:i,isLoading:u,isSuccess:h,isFetchingNextPage:E,ref:T}=y({slug:s}),S=r.useMemo(()=>{var e;return(e=i==null?void 0:i.pages)==null?void 0:e.flatMap(o=>o??[])},[i==null?void 0:i.pages]),d=p(e=>e.setTable),{columnTypes:l,isLoadingColumnTypes:w}=L(s),{deleteRow:m,updateRow:b}=v(),R=r.useMemo(()=>({cell:e,onClick:o})=>{var g;const{status:x}=(g=e==null?void 0:e.row)==null?void 0:g.original;return x!=="N"&&t.createElement(I,{title:n("Regenerate","urlslab"),arrow:!0,placement:"bottom"},t.createElement(M,{size:"xs",onClick:()=>o("N")},t.createElement(B,{name:"refresh"})))},[]),z=r.useMemo(()=>l?[a.accessor("check",{className:"checkbox",cell:e=>t.createElement(f,{tableElement:e}),header:e=>t.createElement(f,{tableElement:e})}),a==null?void 0:a.accessor("url",{tooltip:e=>e.getValue(),header:e=>t.createElement(c,{...e}),size:450}),a==null?void 0:a.accessor("filesize",{unit:"kB",cell:e=>`${Math.round(e.getValue()/1024,0)}Â kB`,header:e=>t.createElement(c,{...e}),size:80}),a==null?void 0:a.accessor("status",{cell:e=>l==null?void 0:l.status.values[e.getValue()],header:e=>t.createElement(c,{...e}),size:80}),a==null?void 0:a.accessor("status_changed",{cell:e=>t.createElement(C,{datetime:e.getValue()}),header:e=>t.createElement(c,{...e}),size:115}),a.accessor("editRow",{className:"editRow",cell:e=>t.createElement(F,{onDelete:()=>m({cell:e,id:"url"})},t.createElement(R,{cell:e,onClick:o=>b({changeField:"status",newVal:o,cell:e})})),header:null,size:0})]:[],[a,l,m,b]);return r.useEffect(()=>{d(s,{data:i})},[i,d,s]),u||w?t.createElement(k,{isFullscreen:!0}):t.createElement(t.Fragment,null,t.createElement(N,{title:n("About this table","urlslab"),tableSlug:s,isMainTableDescription:!0},n("The table displays a list of JavaScript files that the plugin has processed and cached. This is an optional feature that you can enable in the Settings tab. Once a JavaScript file is minified and stored in this table, the original URL in your page's HTML code is replaced with a new path leading to the optimized JavaScript file. This URL replacement process occurs in real time as the page is being generated. If you choose to disable this feature, all JavaScript files will revert to being served with their original URLs. The cache has a validity period that can be configured in the Settings tab. Upon expiration, the file is automatically regenerated.","urlslab")),t.createElement(V,{noExport:!0,noImport:!0}),t.createElement(U,{className:"fadeInto",columns:z,data:h&&S,referrer:T,loadingRows:E},t.createElement(_,null)))}export{Q as default};
