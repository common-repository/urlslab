import{r as n,t as G,R as s,F as q}from"../main-do863ioiri.js";const y=(u,o)=>u&&(!o.length||o.length===1&&o[0]===""),D=(u,o)=>{if(u.length!==o.length)return!1;for(const[p,x]of u.entries())if(x!==o[p])return!1;return!0};function J({id:u,className:o,asTags:p,style:x,children:g,items:i,description:O,labels:k,required:F,defaultValue:N,value:M,isFilter:E,onChange:b,dark:v,menuStyle:K,emptyAll:f,liveUpdate:m}){const A=i.all,h=n.useRef(!0),d=M!==void 0,_=n.useRef(d?M:N),c=n.useRef(y(f,_.current)?["all"]:_.current||[]);_.current&&typeof _.current=="string"&&(c.current=_.current.split(/[,\|]/));const{__:z}=G(),[r,R]=n.useState(!1),[$,C]=n.useState(!1),[t,S]=n.useState(c.current),w=n.useRef(u||Math.floor(Math.random()*1e4)),j=n.useRef(!1),B=n.useCallback(()=>({all:A||"Select All",...f?{}:{notall:"Deselect All"}}),[f,A]),L=n.useCallback(e=>{var l,a;!((l=w.current)!=null&&l.contains(e.target))&&r&&((a=w.current)==null?void 0:a.id)===u&&(R(!1),C(!1))},[u,r]);n.useEffect(()=>{if(!m&&b&&j.current&&!r&&(t!=null&&t.filter(e=>{var l;return!((l=c.current)!=null&&l.includes(e))}))){const e=t.filter(l=>l!=="all"&&l!=="notall");D(e,d?M:N||[])||b(e)}},[t,N,r,d,m]),n.useEffect(()=>(j.current=!0,r&&$&&document.addEventListener("click",L,!1),()=>{r&&$&&document.removeEventListener("click",L,!1)}),[L,r,$]);const T=n.useCallback((e,l)=>{if(l){let a;if(e==="all"||e==="notall")return a=e==="all"?f?["all"]:Object.keys(i):[],c.current=[...new Set(a)],m&&b&&b(c.current),S(c.current),R(!1),C(!1),!1;a=[...t.filter(V=>V!=="all"&&V!=="notall"),e],c.current=[...new Set(a)],m&&b&&b(c.current),S(c.current)}l||(c.current=t==null?void 0:t.filter(a=>a!==e),m&&b&&b(c.current),S(c.current))},[t,f,i,m]),H=n.useCallback(()=>{R(!r),setTimeout(()=>{C(!$)},100)},[r,$]);return n.useEffect(()=>{if(d&&!h.current){const e=y(f,M)?["all"]:M;D(e,t)||S(e)}h.current=!1},[f,d,M]),s.createElement(s.Fragment,null,s.createElement("div",{className:`urlslab-MultiSelectMenu ${o||""} ${r?"active":""}`,style:x,ref:w,id:u},!E&&g?s.createElement("div",{className:`urlslab-inputField-label flex flex-align-center mb-xs ${F?"required":""}`},s.createElement("span",{dangerouslySetInnerHTML:{__html:g.replace(/[\u00A0-\u9999<>\&]/g,e=>"&#"+e.charCodeAt(0)+";").replaceAll(/\`(.+?)\`/g,'<span class="c-darker-saturated-red">$1</span>')}}),k):null,s.createElement("div",{className:`urlslab-MultiSelectMenu__title ${E?"isFilter":""} ${r?"active":""} ${v?"dark":""}`,onClick:H,onKeyUp:e=>H(e),role:"button",tabIndex:0},E?null:s.createElement("span",null,p?t==null?void 0:t.map((e,l)=>`${i[e]}${l===(t==null?void 0:t.length)-1?"":", "}`):`${t==null?void 0:t.length} ${z("items selected","urlslab")}`),s.createElement("span",{dangerouslySetInnerHTML:{__html:E?g.replace(/[\u00A0-\u9999<>\&]/g,e=>"&#"+e.charCodeAt(0)+";").replaceAll(/\`(.+?)\`/g,'<span class="c-darker-saturated-red">$1</span>'):i[t]}}),E&&k),s.createElement("div",{className:`urlslab-MultiSelectMenu__items ${r?"active":""} ${$?"visible":""} ${v?"dark":""}`,style:{...K}},s.createElement("div",{className:`urlslab-MultiSelectMenu__items--inn ${(i==null?void 0:i.length)>8?"has-scrollbar":""}`},!f&&s.createElement("div",{className:"flex flex-justify-space-between"},Object.entries(B()).map(([e,l])=>s.createElement(q,{className:`urlslab-MultiSelectMenu__item selectAll ${f?"width-100":""}`,key:`${e}-${r}`,id:e,onChange:a=>T(e,a),defaultValue:(t==null?void 0:t.indexOf(e))!==-1},l))),Object.entries(i).map(([e,l])=>s.createElement(q,{className:"urlslab-MultiSelectMenu__item",key:`${e}-${r}`,id:e,onChange:a=>T(e,a),defaultValue:(t==null?void 0:t.indexOf(e))!==-1},l))))),O&&s.createElement("p",{className:"urlslab-inputField-description",dangerouslySetInnerHTML:{__html:O.replaceAll(/\`(.+?)\`/g,'<span class="c-darker-saturated-red">$1</span>')}}))}export{J as M};
