import{s as M,_ as a,w as I,r as l,R as t,x as B,N as L,y as U,ao as P,O as m,Q as p,U as h,z as T,V as i,W,F as V,ai as q,A as H,B as G,aM as j,L as O,X as Q,M as J,C as K,Y as X,E as f,I as E}from"../main-do863ioiri.js";import{E as Y}from"./Editor-do863ioiri.js";function S(r){const o=document.createElement("textarea");o.value=r,document.body.appendChild(o),o.select(),document.execCommand("copy"),M(r,{message:a("Text copied to the clipboard!","urlslab"),status:"success"}),document.body.removeChild(o)}const Z=a("Add New Shortcode","urlslab"),z="shortcode_id",$=a("Supported variables: {{page_title}}, {{page_url}}, {{domain}}, {{language_code}}, {{language}} or any WordPress post variable. If the `videoid` attribute is enabled, the following variables can be used: {{video_captions}}, {{video_captions_text}}, {{video_title}}, {{video_description}}, {{video_published_at}}, {{video_duration}}, {{video_channel_title}}, {{video_tags}}. Custom attributes can also be incorporated via shortcode in the form {{your_custom_attribute_name}}","urlslab"),c={shortcode_id:a("ID","urlslab"),shortcode_name:a("Name","urlslab"),flow_id:a("Flow ID","urlslab"),default_value:a("Default value","urlslab"),template:a("HTML template","urlslab"),status:a("Status","urlslab"),date_changed:a("Last change","urlslab"),usage_count:a("Usage","urlslab"),shortcode:a("Shortcode","urlslab"),auto_approve:a("Auto approve","urlslab")},ee={columnVisibility:{default_value:!1,template:!1,model:!1}};function re({slug:r}){const o=I(g=>g.setTable),[s,b]=l.useState(!1);return l.useEffect(()=>{b(!0),o(r,{title:Z,paginationId:z,slug:r,header:c})},[o,r]),s&&t.createElement(te,{slug:r})}function te({slug:r}){const{columnHelper:o,data:s,isLoading:b,isSuccess:g,isFetchingNextPage:k,ref:F}=B({slug:r}),A=l.useMemo(()=>{var e;return(e=s==null?void 0:s.pages)==null?void 0:e.flatMap(n=>n??[])},[s==null?void 0:s.pages]),v=I(e=>e.setTable),{columnTypes:u,isLoadingColumnTypes:N}=L(r),{deleteRow:_,updateRow:d}=U(),{dispatchSetFilters:w,createFilterKey:x}=P("generator/result"),D=l.useMemo(()=>({cell:e,onClick:n})=>{var C;const{status:y}=(C=e==null?void 0:e.row)==null?void 0:C.original;return t.createElement("div",{className:"flex flex-align-center flex-justify-end"},y!=="A"&&t.createElement(m,{title:a("Activate","urlslab"),arrow:!0,placement:"bottom"},t.createElement(p,{size:"xs",color:"success",onClick:()=>n("A")},t.createElement(h,{name:"activate"}))),y!=="D"&&t.createElement(m,{title:a("Disable","urlslab"),arrow:!0,placement:"bottom"},t.createElement(p,{size:"xs",color:"danger",onClick:()=>n("D")},t.createElement(h,{name:"disable"}))))},[]),R=l.useMemo(()=>u?[o.accessor("check",{className:"checkbox",cell:e=>t.createElement(T,{tableElement:e}),header:e=>t.createElement(T,{tableElement:e})}),o.accessor("shortcode_id",{header:e=>t.createElement(i,{...e}),size:45}),o.accessor("shortcode_name",{header:e=>t.createElement(i,{...e}),tooltip:e=>e.getValue(),size:100}),o.accessor("flow_id",{header:e=>t.createElement(i,{...e}),tooltip:e=>e.getValue(),size:100}),o.accessor("default_value",{tooltip:e=>e.getValue(),header:e=>t.createElement(i,{...e}),size:150}),o.accessor("template",{tooltip:e=>e.getValue(),header:e=>t.createElement(i,{...e}),size:300}),o.accessor("status",{className:"nolimit",cell:e=>u==null?void 0:u.status.values[e.getValue()],header:e=>t.createElement(i,{...e}),size:80}),o.accessor("date_changed",{cell:e=>t.createElement(W,{datetime:e.getValue()}),header:e=>t.createElement(i,{...e}),size:115}),o.accessor("usage_count",{header:c.usage_count,size:60}),o.accessor("auto_approve",{className:"nolimit",cell:e=>t.createElement(V,{value:e.getValue(),onChange:n=>d({newVal:n,cell:e})}),header:e=>t.createElement(i,{...e}),size:50}),o.accessor("shortcode",{cell:e=>t.createElement(q,{direction:"row",alignItems:"center",spacing:1},t.createElement(m,{title:a("Click to copy %s to the clipboard","urlslab").replace("%s",e.getValue()),disablePortal:!0},t.createElement(p,{size:"xs",onClick:()=>S(e.getValue())},t.createElement(h,{name:"copy"}))),t.createElement("span",{className:"ellipsis"},e.getValue())),header:c.shortcode,size:250}),o.accessor("editRow",{className:"editRow",cell:e=>t.createElement(H,{onEdit:()=>d({cell:e}),onDelete:()=>_({cell:e})},t.createElement(G,{component:j,to:"/Generator/result",size:"xxs",onClick:()=>{w({[x("shortcode_id")]:{op:"=",val:e.row.original.shortcode_id,keyType:"number"}})},sx:{mr:1}},a("Show results","urlslab")),t.createElement(m,{title:a("Copy shortcode to the clipboard","urlslab"),arrow:!0,placement:"bottom"},t.createElement(p,{size:"xs",onClick:()=>S(e.row.original.shortcode)},t.createElement(h,{name:"copy"}))),t.createElement(D,{cell:e,onClick:n=>d({changeField:"status",newVal:n,cell:e})})),header:null,size:0})]:[],[o,u,x,_,w,d]);return l.useEffect(()=>{v(r,{data:s})},[s,v,r]),b||N?t.createElement(O,{isFullscreen:!0}):t.createElement(t.Fragment,null,t.createElement(Q,{title:a("About this table","urlslab"),tableSlug:r,isMainTableDescription:!0},a("The AI Generator shortcode defines the text generation process within a specific shortcode location. These shortcodes can be incorporated within a WordPress template or added as a single code to the page editor. As soon as the shortcode appears on the page and text is generated, it's replaced by the actual text. When the shortcode is displayed for the first time, it's replaced with empty text and a new generator task is dispatched to a queue. This process can take several days until all texts are created. In the Settings tab, there is an option to have all new text pending for approval or approved right away. To view entries with this status, simply use the filter. Approve each entry individually for them to appear on your website. If not approved, these texts won't be publicly visible on your site.","urlslab")),t.createElement(J,{noImport:!0}),t.createElement(K,{className:"fadeInto",initialState:ee,columns:R,data:g&&A,referrer:F,loadingRows:k},t.createElement(X,null)),t.createElement(ae,{slug:r}))}const ae=l.memo(()=>{const r=f(s=>s.setRowToEdit),o=l.useMemo(()=>({shortcode_name:t.createElement(E,{liveUpdate:!0,defaultValue:"",description:a("Shortcode name","urlslab"),label:c.shortcode_name,onChange:s=>r({shortcode_name:s}),required:!0}),flow_id:t.createElement(E,{liveUpdate:!0,defaultValue:"",description:a("Flow ID from FlowHunt","urlslab"),label:c.flow_id,onChange:s=>r({flow_id:s}),required:!0}),default_value:t.createElement(E,{liveUpdate:!0,description:a("Enter the text to be shown in the shortcode prior to URLsLab generating text from your prompt. If no text is desired, leave blank","urlslab"),defaultValue:"",label:c.default_value,onChange:s=>r({default_value:s})}),auto_approve:t.createElement(V,{defaultValue:!1,onChange:s=>r({auto_approve:s})},c.auto_approve),template:t.createElement(Y,{fullWidth:!0,height:300,description:$+a("The generated text value can be retrieved in the template via the {{value}} variable. If the generator produced a JSON, you can access it using {{json_value.attribute_name}}","urlslab"),defaultValue:"",label:c.template,onChange:s=>{r({template:s})},required:!0})}),[r]);l.useEffect(()=>{f.setState(()=>({...f.getState(),rowEditorCells:o,deleteCSVCols:[z]}))},[])});export{re as default};
