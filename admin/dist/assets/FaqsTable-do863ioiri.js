import{w as k,r as i,R as t,_ as a,x as W,N as z,y as j,s as x,at as M,O as v,Q as N,U as T,z as L,V as b,I as Q,aR as U,S as I,W as P,aS as G,aO as _,A as H,B as C,L as O,X as Y,M as X,C as J,Y as K,E,aT as Z,k as $}from"../main-do863ioiri.js";import{E as ee}from"./Editor-do863ioiri.js";const te=a("Add New FAQ","urlslab"),ae="faq_id",p={faq_id:a("ID","urlslab"),question:a("Question","urlslab"),answer:a("Answer","urlslab"),language:a("Language","urlslab"),status:a("Status","urlslab"),urls_count:a("Number of Assigned URLs","urlslab"),updated:a("Updated","urlslab"),urls:a("Assigned URLs","urlslab"),labels:a("Tags","urlslab")},se={columnVisibility:{answer:!1,urls_count:!1,labels:!1,language:!1}};function ue({slug:u}){const o=k(c=>c.setTable),[l,s]=i.useState(!1);return i.useEffect(()=>{s(!0),o(u,{title:te,paginationId:ae,slug:u,header:p,id:"faq_id"})},[o,u]),l&&t.createElement(ne,{slug:u})}function ne({slug:u}){const{columnHelper:o,data:l,isLoading:s,isSuccess:c,isFetchingNextPage:q,ref:g}=W({slug:u}),w=i.useMemo(()=>{var e;return(e=l==null?void 0:l.pages)==null?void 0:e.flatMap(r=>r??[])},[l==null?void 0:l.pages]),h=k(e=>e.setTable),{columnTypes:n,isLoadingColumnTypes:d}=z(u),{deleteRow:A,updateRow:m}=j(),F=i.useCallback(async e=>{var f,y,R,V;x(e==null?void 0:e.row.original,{message:a("Fetching URLsâ€¦","urlslab"),status:"info"});const r=await M("faqurls/suggest-urls",{question:(y=(f=e==null?void 0:e.row)==null?void 0:f.original)==null?void 0:y.question,answer:(V=(R=e==null?void 0:e.row)==null?void 0:R.original)==null?void 0:V.answer});if(!(r!=null&&r.ok))return x(e==null?void 0:e.row.original,{message:a("Something went wrong","urlslab"),status:"error"}),!1;const S=await r.json();m({cell:e,changeField:"urls",newVal:S})},[m]),B=i.useMemo(()=>({cell:e,onClick:r})=>{var f;const{status:S}=(f=e==null?void 0:e.row)==null?void 0:f.original;return t.createElement("div",{className:"flex flex-align-center flex-justify-end"},S==="D"&&t.createElement(v,{title:a("Activate","urlslab"),arrow:!0,placement:"bottom"},t.createElement(N,{size:"xs",color:"success",onClick:()=>r("A")},t.createElement(T,{name:"activate"}))),S==="A"&&t.createElement(v,{title:a("Disable","urlslab"),arrow:!0,placement:"bottom"},t.createElement(N,{size:"xs",color:"danger",onClick:()=>r("D")},t.createElement(T,{name:"disable"}))))},[]),D=i.useMemo(()=>n?[o.accessor("check",{className:"nolimit checkbox",cell:e=>t.createElement(L,{tableElement:e}),header:e=>t.createElement(L,{tableElement:e})}),o.accessor("faq_id",{className:"nolimit",header:e=>t.createElement(b,{...e}),size:20}),o.accessor("question",{className:"nolimit",cell:e=>t.createElement(Q,{type:"text",value:e.getValue(),onChange:r=>m({newVal:r,cell:e})}),header:e=>t.createElement(b,{...e}),size:200}),o.accessor("answer",{className:"nolimit",header:e=>t.createElement(b,{...e}),size:200}),o.accessor("language",{className:"nolimit",cell:e=>t.createElement(U,{defaultValue:e==null?void 0:e.getValue(),listboxStyles:{minWidth:300},onChange:r=>m({newVal:r,cell:e})}),header:e=>t.createElement(b,{...e}),size:100}),o.accessor("status",{className:"nolimit",cell:e=>t.createElement(I,{value:e.getValue(),onChange:r=>m({newVal:r,cell:e}),name:"status",items:n==null?void 0:n.status.values,autoClose:!0}),header:e=>t.createElement(b,{...e}),size:80}),o.accessor("urls_count",{cell:e=>e.getValue(),header:e=>t.createElement(b,{...e}),size:40}),o.accessor("updated",{cell:e=>t.createElement(P,{datetime:e.getValue()}),header:e=>t.createElement(b,{...e}),size:80}),o.accessor("urls",{tooltip:e=>G(e.getValue()),cell:e=>Array.isArray(e.getValue())?e.getValue().join(", "):e.getValue(),header:e=>t.createElement(b,{...e}),size:100}),o.accessor("labels",{className:"nolimit",cell:e=>t.createElement(_,{value:e.getValue(),slug:u,onChange:r=>m({newVal:r,cell:e})}),header:p.labels,size:160}),o.accessor("editRow",{className:"editRow",cell:e=>t.createElement(H,{onEdit:()=>m({cell:e,id:"faq_id"}),onDelete:()=>A({cell:e,id:"faq_id"})},t.createElement(B,{cell:e,onClick:r=>m({changeField:"status",newVal:r,cell:e})}),t.createElement(C,{size:"xxs",onClick:()=>F(e)},a("Suggest URL","urlslab"))),header:()=>null,size:0})]:[],[o,n,A,F,u,m]);return i.useEffect(()=>{h(u,{data:l})},[l,h,u]),s||d?t.createElement(O,{isFullscreen:!0}):t.createElement(t.Fragment,null,t.createElement(Y,{title:a("About this table","urlslab"),tableSlug:u,isMainTableDescription:!0},a("The table presents a list of Frequently Asked Questions (FAQs). You have the option to display the FAQ widget on the page either through the Settings or by using a shortcode in an HTML template. Furthermore, the SERP module can automatically create FAQ entries. These questions can then be answered by the AI Generator, saving you valuable time.","urlslab")),t.createElement(X,null),t.createElement(J,{className:"fadeInto",initialState:se,columns:D,data:c&&w,referrer:g,loadingRows:q},t.createElement(K,null)),t.createElement(le,{slug:u}))}const le=i.memo(({slug:u})=>{const o=E(n=>n.activatePanel),l=E(n=>n.setRowToEdit),s=E(n=>n.rowToEdit),[c,q]=i.useState({}),{columnTypes:g}=z(u),w=i.useCallback(async()=>{const n=await M("faqurls/suggest-urls",{question:s==null?void 0:s.question,answer:s==null?void 0:s.answer});if(n.ok){const d=await n.json();l({urls:d==null?void 0:d.join(`
`)}),q(A=>({...A,urls:d==null?void 0:d.join(`
`)}))}},[s==null?void 0:s.answer,s==null?void 0:s.question,l]),h=i.useMemo(()=>({question:t.createElement(Q,{liveUpdate:!0,fullWidth:!0,defaultValue:s.question,label:p.question,description:a("Maximum of 500 characters","urlslab"),onChange:n=>l({question:n}),required:!0}),answer:t.createElement(ee,{fullWidth:!0,height:300,description:a("Answer to the question","urlslab"),defaultValue:"",label:a("Answer","urlslab"),onChange:n=>{l({answer:n})}}),generate:t.createElement(C,{className:"generatorBtn",fullWidth:!0,disabled:!s.question,onClick:()=>o("answerGeneratorPanel"),startDecorator:t.createElement(Z,null)},a("Generate Answer","urlslab")),language:t.createElement(U,{defaultValue:"",description:a("Select language","urlslab"),hasTitle:!0,onChange:n=>l({language:n})},p.language),status:t.createElement(I,{defaultAccept:!0,defaultValue:"E",onChange:n=>l({status:n}),name:"status",items:g==null?void 0:g.status.values,autoClose:!0,description:a("The Status of the FAQ","urlslab"),tooltipLabel:{label:a("FAQ Status","urlslab"),tooltip:a("FAQ Status","urlslab"),noWrapText:!0}},a("FAQ Status","urlslab")),labels:t.createElement(_,{optionItem:!0,label:a("Tags:","urlslab"),slug:u,onChange:n=>l({labels:n})}),urls:t.createElement($,{key:c==null?void 0:c.urls,rows:"5",liveUpdate:!0,fullWidth:!0,newLineSeparator:!0,defaultValue:(s==null?void 0:s.urls)||"",label:p.urls,description:a("New line or comma separated list of URLs, where is FAQ assigned. We recommend to use one URL only, otherwise google can understand it as duplicate content if you display same FAQ entry on multiple pages","urlslab"),onChange:n=>l({urls:n})}),suggest_urls:t.createElement(C,{className:"suggestBtn",disabled:!s.question,onClick:()=>w()},a("Suggest URLs","urlslab"))}),[o,g==null?void 0:g.status.values,c==null?void 0:c.urls,s.question,s==null?void 0:s.urls,l,u,w]);i.useEffect(()=>{E.setState(()=>({...E.getState(),rowEditorCells:h}))},[h])});export{le as TableEditorManager,ue as default};
