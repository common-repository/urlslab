import{w as c,r as n,R as t,_ as o,b7 as v,x as P,E as C,N as k,bu as z,V as s,aM as _,b8 as q,bv as x,L,C as w,Y as F,bw as A,bx as M,S as O}from"../main-do863ioiri.js";import{T as R}from"./TableFilters-do863ioiri.js";const D={position:o("Position","urlslab")},I={...v,...D},m="serp-queries/query/top-urls",U=[{key:"position",dir:"ASC",op:">"}],H={columnVisibility:{country_value:!1,country_volume:!1}};function X(){const l=c(i=>i.setTable),a=c(i=>i.queryDetailPanel),[r,d]=n.useState(!1),{query:p,country:g}=a;return n.useEffect(()=>{d(!0),l(m,{slug:m,header:I,paginationId:"url_id",sorting:U,fetchOptions:{query:p,country:g,domain_type:"A"}})},[g,p,l]),r&&t.createElement(j,null)}const j=n.memo(()=>{const{columnHelper:l,data:a,isLoading:r,isSuccess:d,isFetchingNextPage:p,ref:g}=P({slug:m}),i=n.useMemo(()=>{var e;return(e=a==null?void 0:a.pages)==null?void 0:e.flatMap(N=>N??[])},[a==null?void 0:a.pages]),E=c().useFetchOptions(),h=c(e=>e.queryDetailPanel),f=C(e=>e.activePanel),{columnTypes:u,isLoadingColumnTypes:V}=k(m),{setAIGeneratorConfig:y}=z(),{query:b}=h,S=n.useCallback(()=>{y({keywordsList:[{q:b,checked:!0}],serpUrlsList:[],dataSource:"SERP_CONTEXT",selectedPromptTemplate:"4",title:b})},[b,y]),T=n.useMemo(()=>u?[l.accessor("position",{cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:20}),l.accessor("url_name",{tooltip:e=>e.getValue(),cell:e=>t.createElement(_,{to:e.getValue(),target:"_blank"},e.getValue()),header:e=>t.createElement(s,{...e}),size:200}),l.accessor("domain_type",{className:"nolimit",cell:e=>u==null?void 0:u.domain_type.values[e.getValue()],header:e=>t.createElement(s,{...e}),size:80}),l.accessor("url_title",{tooltip:e=>e.getValue(),cell:e=>t.createElement("strong",null,e.getValue()),header:e=>t.createElement(s,{...e}),minSize:100}),l.accessor("url_description",{tooltip:e=>e.getValue(),cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),minSize:100}),l.accessor("comp_intersections",{cell:e=>t.createElement("strong",null,e.getValue()),header:e=>t.createElement(s,{...e}),minSize:50}),l.accessor("best_position",{cell:e=>t.createElement("strong",null,e.getValue()),header:e=>t.createElement(s,{...e}),minSize:50}),l.accessor("top10_queries_cnt",{cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),minSize:50}),l.accessor("top100_queries_cnt",{cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),minSize:50}),l.accessor("top_queries",{tooltip:e=>q(e.getValue()),cell:e=>e.getValue().join(", "),header:e=>t.createElement(s,{...e}),minSize:200}),l.accessor("my_urls_ranked_top10",{className:"nolimit",cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:30}),l.accessor("my_urls_ranked_top100",{className:"nolimit",cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:30}),l.accessor("country_volume",{className:"nolimit",cell:e=>e.getValue()&&e.getValue()>0?e.getValue():"-",header:e=>t.createElement(s,{...e}),size:30}),l.accessor("country_value",{className:"nolimit",cell:e=>e.getValue()&&e.getValue()>0?e.getValue():"-",header:e=>t.createElement(s,{...e}),size:30})]:[],[l,u]);return t.createElement(t.Fragment,null,t.createElement("div",{className:"urlslab-moduleView-headerBottom"},t.createElement(B,null),t.createElement("div",{className:"flex flex-justify-space-between flex-align-center pb-s"},t.createElement(R,null),t.createElement(x,{tableActions:{noImport:!0,noDelete:!0}}))),r||V?t.createElement(L,null):t.createElement(t.Fragment,null,t.createElement(w,{columns:T,initialState:H,data:d&&i,referrer:g,loadingRows:p,disableAddNewTableRecord:!0},t.createElement(F,null)),E.domain_type==="M"&&(a==null?void 0:a.length)===0&&t.createElement("div",{className:"urlslab-serpPanel-empty-table"},t.createElement("p",null,o("None of your pages are ranking for this keyword","urlslab")),t.createElement(_,{className:"urlslab-button active",to:"/"+A("urlslab-generator"),onClick:S},o("Create a Post","urlslab"))),E.domain_type==="C"&&(a==null?void 0:a.length)===0&&t.createElement("div",{className:"urlslab-serpPanel-empty-table"},t.createElement("p",null,o("None of your competitors are ranking for this keyword","urlslab")))),f==="export"&&t.createElement(M,null))}),B=n.memo(()=>{const l=c().useFetchOptions(),a=c(r=>r.setFetchOptions);return t.createElement("div",{className:"flex flex-align-center mb-m"},t.createElement(O,{defaultAccept:!0,autoClose:!0,items:{A:o("All URLs","urlslab"),M:o("My URLs","urlslab"),C:o("Competitor URLs","urlslab")},name:"url_view_type",value:l.domain_type,onChange:r=>a(m,{domain_type:r})}))});export{X as default};
