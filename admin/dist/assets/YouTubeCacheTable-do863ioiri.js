import{w as S,r as l,E as h,R as t,_ as a,x as N,N as M,y as F,O as m,Q as d,U as b,z as R,V as c,ai as U,W as A,A as $,L as B,X as P,M as O,C as Y,Y as H}from"../main-do863ioiri.js";const W="videoid",v={videoid:a("YouTube video ID","urlslab"),title:a("Title","urlslab"),captions:a("Captions","urlslab"),status:a("Status","urlslab"),usage_count:a("Usage","urlslab"),status_changed:a("Changed","urlslab")},Q={columnVisibility:{captions:!1}};function K({slug:n}){const s=S(E=>E.setTable),[i,g]=l.useState(!1);return l.useEffect(()=>{g(!0),s(n,{paginationId:W,slug:n,header:v}),h.setState(()=>({deleteCSVCols:["usage_count"]}))},[s,n]),i&&t.createElement(j,{slug:n})}function j({slug:n}){const{columnHelper:s,data:i,isLoading:g,isSuccess:E,isFetchingNextPage:_,ref:z}=N({slug:n}),k=l.useMemo(()=>{var e;return(e=i==null?void 0:i.pages)==null?void 0:e.flatMap(o=>o??[])},[i==null?void 0:i.pages]),f=S(e=>e.setTable),w=h(e=>e.activatePanel),T=h(e=>e.setRowToEdit),p=h(e=>e.setOptions),{columnTypes:u,isLoadingColumnTypes:I}=M(n),{deleteRow:y,updateRow:V}=F(),x=l.useCallback(e=>{const o=e==null?void 0:e.row.original,r=e==null?void 0:e.getValue();p([]),T({}),o.usage_count>0&&p([{detailsOptions:{title:`${a("Video ID","urlslab")} “${o.videoid}” ${a("is used on these URLs","urlslab")}`,text:`${a("Video title:","urlslab")} ${e.row._valuesCache.title[1]}`,slug:n,url:`${o.videoid}/urls`,showKeys:[{name:["url_name",a("URL","urlslab")]}],listId:"url_id",counter:r}}])},[p,T,n]),D=l.useMemo(()=>({cell:e,onClick:o})=>{var C;const r=(C=e==null?void 0:e.column)==null?void 0:C.status;return t.createElement("div",{key:r,className:"flex flex-align-center flex-justify-end"},(r==="W"||r==="D")&&t.createElement(m,{title:a("Accept","urlslab"),arrow:!0,placement:"bottom"},t.createElement(d,{size:"xs",color:"success",onClick:()=>o("A")},t.createElement(b,{name:"activate"}))),(r==="P"||r==="W"||r==="A"||r==="N")&&t.createElement(m,{title:a("Decline","urlslab"),arrow:!0,placement:"bottom"},t.createElement(d,{size:"xs",color:"danger",onClick:()=>o("D")},t.createElement(b,{name:"disable"}))),r!=="N"&&t.createElement(m,{title:a("Regenerate","urlslab"),arrow:!0,placement:"bottom"},t.createElement(d,{size:"xs",color:"neutral",onClick:()=>o("N")},t.createElement(b,{name:"refresh"}))))},[]),L=l.useMemo(()=>u?[s.accessor("check",{className:"checkbox",cell:e=>t.createElement(R,{tableElement:e}),header:e=>t.createElement(R,{tableElement:e})}),s.accessor("img_url",{cell:e=>t.createElement("div",{className:"video-thumbnail"},t.createElement("img",{src:e==null?void 0:e.getValue()})),header:e=>t.createElement(c,{...e}),size:80}),s.accessor("videoid",{cell:e=>t.createElement("a",{href:`https://youtu.be/${e==null?void 0:e.getValue()}`,target:"_blank",rel:"noreferrer"},e==null?void 0:e.getValue()),header:e=>t.createElement(c,{...e}),size:80}),s.accessor("title",{tooltip:e=>e.getValue(),header:e=>t.createElement(c,{...e}),size:150}),s.accessor("captions",{tooltip:e=>e.getValue(),header:e=>t.createElement(c,{...e}),size:150}),s.accessor("status",{cell:e=>u==null?void 0:u.status.values[e.getValue()],header:e=>t.createElement(c,{...e}),size:80}),s.accessor("usage_count",{cell:e=>t.createElement(U,{direction:"row",alignItems:"center",spacing:1},t.createElement(t.Fragment,null,t.createElement("span",null,e==null?void 0:e.getValue()),(e==null?void 0:e.getValue())>0&&t.createElement(m,{title:a("Show URLs where used","urlslab"),arrow:!0,placement:"bottom"},t.createElement(d,{size:"xs",onClick:()=>{x(e),w(0)}},t.createElement(b,{name:"link"}))))),header:v.usage_count,size:60}),s.accessor("status_changed",{cell:e=>t.createElement(A,{datetime:e.getValue()}),header:e=>t.createElement(c,{...e}),size:115}),s.accessor("editRow",{className:"editRow",cell:e=>t.createElement($,{onDelete:()=>y({cell:e})},t.createElement(D,{cell:e,onClick:o=>V({changeField:"status",newVal:o,cell:e})})),header:null,size:0})]:[],[w,s,u,y,x,V]);return l.useEffect(()=>{f(n,{data:i})},[i,f,n]),g||I?t.createElement(B,{isFullscreen:!0}):t.createElement(t.Fragment,null,t.createElement(P,{title:a("About this table","urlslab"),tableSlug:n,isMainTableDescription:!0},a("The plugin features a table that compiles all YouTube videos found on your website. This includes metadata for each video, a paid feature provided by the URLsLab Service. The metadata is used to enrich the HTML with schema fields, assisting Google in better identifying and indexing videos on your site, thereby potentially enhancing your website's ranking compared to your competitors. Moreover, the plugin offers a lazy loading feature for video iframes. This means that the iframes will only load when a user clicks on a video, avoiding slow loading times when a visitor initially opens the page. Until the visitor decides to watch a video, a thumbnail image is displayed instead of prematurely loading the iframe.","urlslab")),t.createElement(O,{noImport:!0}),t.createElement(Y,{className:"fadeInto",columns:L,initialState:Q,data:E&&k,referrer:z,loadingRows:_},t.createElement(H,null)))}export{K as default};
