import{w as p,r as o,bp as A,bq as M,br as B,R as t,_ as n,bn as D,x as U,E as Q,N as j,bu as O,bs as H,y as X,V as s,ag as T,W as q,aS as R,B as m,aO as W,X as Y,bv as $,L as J,C as K,Y as Z,bx as ee,b as te,A as ae,aM as P}from"../main-do863ioiri.js";import{T as se}from"./TableFilters-do863ioiri.js";const i="serp-urls/url/queries",le=[{key:"comp_intersections",dir:"DESC",op:"<"}],re={position:n("Position","urlslab")},ne={...re,...D},oe={columnVisibility:{country:!1,type:!1,status:!1,updated:!1,comp_urls:!1,my_urls:!1,my_urls_ranked_top10:!1,my_urls_ranked_top100:!1,internal_links:!1,next_update_delay:!1,schedule:!1,labels:!1,country_level:!1,country_kd:!1,country_high_bid:!1,country_low_bid:!1}},ie=[A,"serp-queries/query-cluster","serp-gap"];function ge(){const a=p(c=>c.setTable),r=p(c=>c.urlDetailPanel),[E,b]=o.useState(!1),{url:g}=r;return o.useEffect(()=>{b(!0),a(i,{slug:i,header:ne,sorting:le,relatedQueries:ie,fetchOptions:{url:g},sourceTableInfo:{slug:A,optionalSelector:M,paginationId:B}})},[a,g]),E&&t.createElement(ce,null)}const ce=o.memo(()=>{const{columnHelper:a,data:r,isLoading:E,isSuccess:b,isFetchingNextPage:g,ref:c}=U({slug:i}),L=o.useMemo(()=>{var e;return(e=r==null?void 0:r.pages)==null?void 0:e.flatMap(u=>u??[])},[r==null?void 0:r.pages]),h=p(e=>e.setTable),F=Q(e=>e.activePanel),{columnTypes:l,isLoadingColumnTypes:I}=j(i),{setAIGeneratorConfig:y}=O(),{compareUrls:d}=H("query"),{updateRow:_}=X(),V=o.useCallback(e=>{e&&y({keywordsList:[{q:e,checked:!0}],serpUrlsList:[],dataSource:"SERP_CONTEXT",selectedPromptTemplate:"4",title:e})},[y]),G=o.useMemo(()=>l?[a.accessor("position",{tooltip:e=>e.getValue(),cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:10}),a.accessor("query",{tooltip:e=>e.getValue(),cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:200}),a.accessor("country",{cell:e=>t.createElement("strong",null,T[e.getValue()]?T[e.getValue()]:e.getValue()),header:e=>t.createElement(s,{...e}),minSize:130}),a.accessor("type",{className:"nolimit",tooltip:e=>l==null?void 0:l.type.values[e.getValue()],cell:e=>l==null?void 0:l.type.values[e.getValue()],header:e=>t.createElement(s,{...e}),size:80}),a.accessor("next_update_delay",{className:"nolimit",header:e=>t.createElement(s,{...e}),size:150}),a.accessor("status",{className:"nolimit",cell:e=>l==null?void 0:l.status.values[e.getValue()],header:e=>t.createElement(s,{...e}),size:100}),a.accessor("updated",{className:"nolimit",cell:e=>t.createElement(q,{datetime:e.getValue()}),header:e=>t.createElement(s,{...e}),size:40}),a.accessor("schedule",{className:"nolimit",cell:e=>t.createElement(q,{datetime:e.getValue()}),header:e=>t.createElement(s,{...e}),size:40}),a.accessor("comp_intersections",{className:"nolimit",cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:30}),a.accessor("comp_urls",{tooltip:e=>t.createElement(t.Fragment,null,R(e.getValue()),e.getValue().length>0&&t.createElement(m,{size:"xs",sx:{mt:1},onClick:()=>d({cell:e,urlsArray:e.getValue(),country:e.row.original.country})},n("Content Gap","urlslab"))),cell:e=>e.getValue().join(", "),header:e=>t.createElement(s,{...e}),size:100}),a.accessor("my_position",{className:"nolimit",cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:30}),a.accessor("my_urls",{tooltip:e=>t.createElement(t.Fragment,null,R(e.getValue()),e.getValue().length>0&&t.createElement(m,{size:"xs",sx:{mt:1},onClick:()=>d({cell:e,urlsArray:e.getValue(),country:e.row.original.country})},n("Content Gap","urlslab"))),cell:e=>e.getValue().join(", "),header:e=>t.createElement(s,{...e}),size:100}),a.accessor("my_urls_ranked_top10",{className:"nolimit",cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:30}),a.accessor("my_urls_ranked_top100",{className:"nolimit",cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:30}),a.accessor("internal_links",{className:"nolimit",cell:e=>e.getValue(),header:e=>t.createElement(s,{...e}),size:30}),a.accessor("country_volume",{className:"nolimit",cell:e=>e.getValue()&&e.getValue()>0?e.getValue():"-",header:e=>t.createElement(s,{...e}),size:30}),a.accessor("country_kd",{className:"nolimit",cell:e=>e.getValue()&&e.getValue()>0?e.getValue():"-",header:e=>t.createElement(s,{...e}),size:30}),a.accessor("country_level",{className:"nolimit",cell:e=>l==null?void 0:l.country_level.values[e.getValue()],header:e=>t.createElement(s,{...e}),size:30}),a.accessor("intent",{className:"nolimit",cell:e=>l==null?void 0:l.intent.values[e.getValue()],header:e=>t.createElement(s,{...e}),size:30}),a.accessor("country_low_bid",{className:"nolimit",cell:e=>e.getValue()&&e.getValue()>0?e.getValue():"-",header:e=>t.createElement(s,{...e}),size:30}),a.accessor("country_high_bid",{className:"nolimit",cell:e=>e.getValue()&&e.getValue()>0?e.getValue():"-",header:e=>t.createElement(s,{...e}),size:30}),a.accessor("labels",{className:"nolimit",cell:e=>t.createElement(W,{value:e.getValue(),slug:i,onChange:u=>_({newVal:u,cell:e})}),header:D.labels,size:100}),a.accessor("editRow",{className:"editRow",cell:e=>{const u=()=>{var w,x,C,N,S,k;const{data:f,isSuccess:z}=te();return t.createElement(ae,null,z&&f.serp.active&&(((C=(x=(w=e==null?void 0:e.row)==null?void 0:w.original)==null?void 0:x.my_urls)==null?void 0:C.length)>0||((k=(S=(N=e==null?void 0:e.row)==null?void 0:N.original)==null?void 0:S.comp_urls)==null?void 0:k.length)>0)&&t.createElement(m,{size:"xxs",onClick:()=>d({cell:e,urlsArray:[...e.row.original.my_urls,...e.row.original.comp_urls],country:e.row.original.country})},n("Content Gap","urlslab")),z&&f["urlslab-generator"].active&&t.createElement(m,{component:P,size:"xxs",to:"/Generator/generator",onClick:()=>V(e.row.original.query)},n("Create Content","urlslab")),t.createElement(m,{component:P,size:"xxs",to:"/Serp/serp-queries",color:"neutral",onClick:()=>{var v;p.setState({queryDetailPanel:{query:e.row.original.query,country:e.row.original.country,slug:(v=e.row.original.query)==null?void 0:v.replace(" ","-")}})},sx:{mr:1}},n("Show Detail","urlslab")))};return t.createElement(u,null)},header:null,size:0})]:[],[a,l,d,V,_]);return o.useEffect(()=>{h(i,{data:r})},[r,h]),t.createElement(t.Fragment,null,t.createElement(Y,{title:n("About this table","urlslab"),tableSlug:i,sx:{mb:2}},n("Table shows list of queries, where selected URL ranks in top 100 based on loaded SERP data.","urlslab")),t.createElement("div",{className:"urlslab-moduleView-headerBottom"},t.createElement("div",{className:"flex flex-justify-space-between flex-align-center pb-s"},t.createElement(se,null),t.createElement($,{tableActions:{noImport:!0,noDelete:!0}}))),E||I?t.createElement(J,null):t.createElement(K,{initialState:oe,columns:G,data:b&&L,referrer:c,loadingRows:g,disableAddNewTableRecord:!0},t.createElement(Z,null)),F==="export"&&t.createElement(ee,null))});export{ge as default};
